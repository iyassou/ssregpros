# Example YAML file.
seed: 0xCAFE
batch_size: 4
dataset_split: [0.8, 0.1, 0.1]
# Above yields (21, 6, 6) because stratified on patient ID

preprocessor:
  mri_mask_prostate_area_square_millimetres_threshold: 200

registration_network:
  resnet: "resnet101"
  regression_head_bottleneck_layer_size: 1024

training:
  checkpointer_cleanup_on_exit: false
  gradient_accumulation_steps: 2
  # Training Scheme
  monitored_validation_metric: -ncc_loss
  early_stopping_mode: min
  early_stopping_min_delta_rel: 0.1
  early_stopping_min_delta_abs: 0
  # > Phase A
  lp_early_stopping_min_epochs: 0
  lp_max_epochs: 5
  lp_patience_steps: 126 # len(training) * 6
  lp_learning_rate: 0.001
  lp_weight_decay: 0.01
  # > Phase B
  ft_early_stopping_min_epochs: 0
  ft_max_epochs: 5
  ft_patience_steps: 126 # len(training) * 6
  ft_learning_rate: 0.001
  ft_weight_decay: 0.01
  ft_unfreeze_plan: ["layer1", "layer2", "layer3", "layer4"]
  ft_unfreeze_learning_rate_multipliers: [1, 0.5, 0.25, 0.125]
  ft_unfreeze_min_delta_rel: 0.1
  ft_unfreeze_min_delta_abs: 0
  ft_unfreeze_patience_steps: 1

loss:
  ncc_weight: 1
  sobel_weight: 0
  boundary_heatmap_weight: 0
  transformation_parameters_weight: 1
